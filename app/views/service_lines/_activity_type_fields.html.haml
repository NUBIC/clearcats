%li{ :class => "activity_type fields", :id => "activity_type_#{f.object.id}"}
  - unless f.object.new_record?
    %span{ :class => "handle"}
      [reorder]
    %span{ :class => "nested_attributes_remove"}
      = link_to_remove_nested_attribute_fields 'Remove', f, :activity_types
  .nested_attributes_field
    = f.label :name
    = f.text_field :name
  
  
  - has_date_or_reminder = f.object.has_due_date? || f.object.has_reminder?
  %div{ :class => "due_dates_and_reminder_toggle #{has_date_or_reminder ? 'hide' : ''}" }
    = link_to "Add Dates/Reminders", "javascript:void(0);", { :class => "due_dates_and_reminder_fields_toggle" }
  
  %div{ :class => "due_dates_and_reminder_fields #{has_date_or_reminder ? '' : 'hide'}" }
    = link_to "Hide Dates/Reminders", "javascript:void(0);", { :class => "due_dates_and_reminder_toggle" }
    .nested_attributes_field
      = f.label :due_in_days_after, "Due Date", :class => "date_reminder"
      = f.text_field :due_in_days_after, {:class => "integer_input"}
      %b (number of days after activity started)
    .nested_attributes_field
      = f.label :client_reminder, "Client Reminder", :class => "date_reminder"
      = f.text_field :client_reminder, {:class => "integer_input"}
      = f.label :client_followup_reminder, "2nd Reminder", :class => "date_reminder"
      = f.text_field :client_followup_reminder, {:class => "integer_input"}
      %b (days before due date)
    .nested_attributes_field
      = f.label :staff_reminder, "Staff Reminder", :class => "date_reminder"
      = f.text_field :staff_reminder, {:class => "integer_input"}
      = f.label :staff_followup_reminder, "2nd Reminder", :class => "date_reminder"
      = f.text_field :staff_followup_reminder, {:class => "integer_input"}
      %b (days before due date)